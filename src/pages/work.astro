---
// Components
import BaseLayout from "../layouts/BaseLayout.astro";
import Subtitle from "../components/Subtitle.astro";
import CaseStudy from "../components/CaseStudy.astro";
import Testimonial from "../components/Testimonial.astro";

// Assets
import { Image } from "astro:assets";
import scribble from "../assets/scribbles/loopy.svg";

// Data
import { caseStudies } from "../data/caseStudies";
import { testimonials } from "../data/testimonials";
---

<BaseLayout
  title="Karina Tovar | Work"
  description="Karina Tovar case studies and projects"
>
  <div class="grid-container" data-intersection-observer={true}>
    <div class="grid-content">
      <div class="text-content">
        <h2>Recent Work</h2>
        <h1>A few examples of how I work</h1>
        <p>
          This is a collection of case studies and projects that I've worked on
          that showcase the work I've done.
        </p>
      </div>
    </div>

    <div class="visual">
      <Image src={scribble} alt="Scribble" width={340} height={340} />
    </div>
  </div>

  <div class="section-container">
    <div class="section-content case-studies" data-intersection-observer={true}>
      <Subtitle title="Recent Work" />
      <div class="case-studies-listing">
        {
          caseStudies.map((study, index) => (
            <CaseStudy {...study} reversed={index % 2 !== 0} />
          ))
        }
      </div>
    </div>
  </div>

  <div class="spacer-large"></div>

  <div class="section-container">
    <div class="section-content">
      <Subtitle title="Testimonials" />
      <div class="testimonials-container">
        <div
          class="testimonials-listing large-only"
          data-testimonials-container
        >
          <Testimonial
            {...testimonials[0]}
            include_classes="active flip"
            data-index={0}
            allTestimonials={testimonials}
          />
        </div>
        <div class="testimonials-listing small-only">
          {
            testimonials.map((testimonial, index) => (
              <Testimonial
                {...testimonial}
                include_classes="active flip"
                data-index={index}
                totalTestimonials={testimonials.length}
                allTestimonials={testimonials}
              />
            ))
          }
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style lang="scss">
  // Breakpoint mixins
  @import "../styles/base/_breakpoints.scss";

  // Visual section
  .visual {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .case-studies {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-base);

    .case-studies-listing {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-quad);
    }
  }

  .testimonials-container {
    position: relative;
    width: 100%;
  }

  .testimonials-listing {
    position: relative;
    flex-direction: column;
    gap: var(--spacing-double);
    width: 100%;
    padding: var(--spacing-base) 0 var(--spacing-triple);

    &.small-only {
      display: none;

      @include tablet {
        display: flex;
      }
    }

    &.large-only {
      display: flex;

      @include tablet {
        display: none;
      }
    }
  }
</style>
