---
interface ImpactMetric {
  metric: string;
  value: string;
  description: string;
}

interface Props {
  title?: string;
  metrics: ImpactMetric[];
}

const { title = "Our Impact", metrics } = Astro.props;
---

<div class="impact-section" data-intersection-observer={true}>
  <h2>{title}</h2>
  <div class={`impact-grid metrics-${metrics.length}`}>
    {
      metrics.map(({ metric, value, description }) => (
        <div class="impact-item">
          <span class="impact-metric">{metric}</span>
          <span class="impact-value">{value}</span>
          <span class="impact-description">{description}</span>
        </div>
      ))
    }
  </div>
</div>

<style lang="scss">
  @use "../../styles/base/_breakpoints.scss" as *;

  .impact-section {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-double);

    h2 {
      color: var(--color-ink-tertiary);
      font-family: var(--font-headings);
    }

    .impact-grid {
      display: grid;
      gap: var(--spacing-base);

      // Dynamic grid columns based on number of metrics
      &.metrics-1 {
        grid-template-columns: minmax(0, 1fr);
      }

      &.metrics-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        
        @include mobile {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      &.metrics-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        
        @include tablet {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        
        @include mobile {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .impact-item {
        display: flex;
        flex-direction: column;
        padding: var(--spacing-base);
        border-radius: var(--border-radius-base);
        border: 1px solid var(--color-border);
        background-color: var(--color-paper);
        transition: all var(--transition-base);

        &:hover {
          background-color: var(--color-surface);
        }

        .impact-metric {
          font-family: var(--font-sans);
          font-size: var(--font-size-base);
          font-weight: 600;
          color: var(--color-ink-tertiary);
        }

        .impact-value {
          font-size: clamp(2rem, 5vw, 2.5rem);
          color: var(--color-ink-secondary);
          font-family: var(--font-headings);
          margin: -4px 0 0;
        }

        .impact-description {
          font-size: var(--font-size-small);
          color: var(--color-ink-secondary);
          margin: -8px 0 0;
        }
      }
    }
  }
</style> 