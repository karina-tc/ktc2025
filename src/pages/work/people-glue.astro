---
// Components
import BaseLayout from "../../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import CaseStudyHeader from "../../components/work/CaseStudyHeader.astro";
import { getCaseStudy } from "../../data/case-study-details";

//Assets

// Data
const caseStudy = getCaseStudy("peopleGlue");

// Check access
import { checkAccess, hasValidAccessToken } from "../../middleware/checkAccess";
if (Astro.url.pathname && checkAccess(Astro.url.pathname)) {
  const cookies = Astro.request.headers.get("cookie") || "";

  if (!hasValidAccessToken(cookies)) {
    return Astro.redirect(`/work/access?redirect=${Astro.url.pathname}`);
  }
}
---

<BaseLayout title={caseStudy.title} description={caseStudy.description}>
  <!-- Case Study Header -->
  <CaseStudyHeader {...caseStudy} />
</BaseLayout>
