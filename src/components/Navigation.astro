---
import Atom from "./Atom.astro";
const pathname = new URL(Astro.request.url).pathname;
---

<nav class="nav-container">
  <div class="nav-content">
    <a class="nav-logo" href="/">
      <Atom color="var(--color-coffee)" />
    </a>
    <ul class="nav-list">
      <li>
        <a href="/" class={pathname === "/" ? "active" : ""}>Intro</a>
      </li>
      <li>
        <a href="/about" class={pathname.startsWith("/about") ? "active" : ""}
          >About</a
        >
      </li>
      <li>
        <a href="/work" class={pathname.startsWith("/work") ? "active" : ""}
          >Work</a
        >
      </li>
      <li>
        <a href="/blog" class={pathname.startsWith("/blog") ? "active" : ""}
          >Blog</a
        >
      </li>
    </ul>
  </div>
  <div class="nav-background"></div>
</nav>

<style lang="scss">
  .nav-container {
    position: sticky;
    top: 0;
    z-index: 100;

    width: 100%;
    padding: var(--spacing-base) var(--spacing-base) var(--spacing-small);
    margin: var(--spacing-double) auto;

    color: var(--color-ink);
    backdrop-filter: blur(4px);

    @include tablet {
      margin: var(--spacing-base) auto;
    }
  }

  .nav-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    flex-direction: row;

    width: 100%;
    max-width: var(--content-narrow-plus);
    margin: 0 auto;
    z-index: 1;
    position: relative;

    @include tablet {
      flex-direction: column;
      gap: var(--spacing-base);
      align-items: flex-start;
    }
  }

  .nav-logo {
    display: flex;
    align-items: center;
    outline: none;
    border: none;
    background: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.215, 0.610, 0.355, 1);

    &:hover,
    &:focus {
      outline: none;
      border: none;

      :global(.atom-container .atom path) {
        animation: none !important;
      }
    }
  }

  .nav-list {
    display: flex;
    gap: var(--spacing-xsmall);

    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-list a {
    font-size: var(--font-size-base);
    text-decoration: none;
    color: var(--color-ink);
    padding: 10px 12px 8px;
    border-radius: 4px;
    transition: all 0.3s ease-in-out;

    &:hover {
      background: var(--color-surface);
      text-decoration: underline;
      text-underline-offset: 4px;
      text-decoration-color: var(--color-ink);
    }
  }

  .nav-list a.active {
    background: var(--color-ink);
    color: var(--color-paper);
  }

  .nav-background {
    position: absolute;
    top: 20px;
    left: 0;
    width: 100%;
    height: calc(100% - 20px);
    background: linear-gradient(to bottom, var(--color-paper), transparent);

    &::before {
      content: "";
      position: absolute;
      top: -20px;
      left: 0;
      width: 100%;
      height: 20px;
      background: var(--color-paper);
    }
  }
</style>
