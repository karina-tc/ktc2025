---
// Components
import BaseLayout from "../layouts/BaseLayout.astro";
import Subtitle from "../components/Subtitle.astro";
import CaseStudy from "../components/CaseStudy.astro";
import Testimonial from "../components/Testimonial.astro";
import SnippetsGallery from "../components/work/Elements/SnippetsGallery.astro";
import SnippetsGalleryItem from "../components/work/Elements/SnippetsGalleryItem.astro";
import DraggableScreens from "../components/work/Elements/DraggableScreens.astro";

// Assets
import { Image } from "astro:assets";
import scribble from "../assets/scribbles/loopy.svg";
import contractsDemo01 from "../assets/backgrounds/noise-1.png";
import contractsDemo02 from "../assets/backgrounds/noise-2.png";
import thumbTest from "../assets/case-studies/tropic/thumbnail-test.png";

// Data
import { caseStudies } from "../data/caseStudies";
import { testimonials } from "../data/testimonials";

// Import the images
import bcDataMapping from "../assets/case-studies/tropic/bc-data-mapping.png";
import bcIntegrations from "../assets/case-studies/tropic/bc-integrations.png";
import bcCva from "../assets/case-studies/tropic/bc-cva.png";
import bcSpendinsights from "../assets/case-studies/tropic/bc-spendinsights.png";
---

<BaseLayout
  title="Karina Tovar | Work"
  description="Karina Tovar case studies and projects"
>
  <section class="neue-container py-20" data-intersection-observer={true}>
    <div class="mx-auto flex flex-col md:flex-row gap-4">
      <div class="flex-1 flex flex-col gap-4">
        <h4>Recent Work</h4>
        <h1 class="mt-4">A few examples of how I work</h1>
        <p class="md:max-w-xl mt-4 caramel-text text-pretty">
          Samples of recent work I've done
        </p>
      </div>
      <div
        class="flex-1 md:max-w-md justify-center items-center hidden md:flex"
      >
        <Image
          src={scribble}
          alt="Scribble"
          loading="eager"
          draggable={false}
        />
      </div>
    </div>
  </section>

  <SnippetsGallery>
    <!-- Tropic: Supplierverse -->
    <SnippetsGalleryItem large>
      <div class="cs-wrapper">
        <div class="cs-content">
          <span class="cs-client">Tropic</span>
          <h2>
            <span>Beyond Contracts</span>
            <span>Building Financial Clarity</span>
          </h2>
          <p>
            How we rebuilt Tropic to make suppliers the heart of our platform.
            Evolving from contract focused to a true spend management solution.
          </p>
          <a href="/work/beyond-contracts" class="cs-button">View Case Study</a>
        </div>
        <div class="cs-image desktop-only">
          <DraggableScreens
            instanceId="beyond-contracts"
            screens={[
              {
                src: bcDataMapping.src,
                alt: "Tropic Data Matching",
                width: 527,
                rotation: 0,
                zIndex: 1,
                initialX: 55,
                initialY: 60,
              },
              {
                src: bcIntegrations.src,
                alt: "Tropic Integrations",
                width: 474,
                rotation: 0,
                zIndex: 1,
                initialX: 2,
                initialY: 2,
              },
              {
                src: bcCva.src,
                alt: "Spend Insights",
                width: 500,
                rotation: 0,
                zIndex: 1,
                initialX: 57,
                initialY: 0,
              },
              {
                src: bcSpendinsights.src,
                alt: "Spend Insights",
                width: 200,
                rotation: 0,
                zIndex: 1,
                initialX: 10,
                initialY: 60,
              },
            ]}
          />
        </div>
      </div>
    </SnippetsGalleryItem>
  </SnippetsGallery>

  <div class="spacer-massive"></div>

  <SnippetsGallery>
    <!-- Tropic: Ask Tropic -->
    <SnippetsGalleryItem large>
      <div class="cs-wrapper">
        <div class="cs-content">
          <span class="cs-client">Tropic</span>
          <h2>
            <span>Ask Tropic</span>
            <span>Assisted Intelligence</span>
          </h2>
          <p>
            How we created a new AI-powered assistant to help Tropic customers
            get answers to their questions.
          </p>
          <a href="/work/ask-tropic" class="cs-button">View Case Study</a>
        </div>
        <div class="cs-image desktop-only">
          <DraggableScreens
            instanceId="ask-tropic"
            screens={[
              {
                src: bcDataMapping.src,
                alt: "Tropic Data Matching",
                width: 527,
                rotation: 0,
                zIndex: 1,
                initialX: 55,
                initialY: 60,
              },
              {
                src: bcIntegrations.src,
                alt: "Tropic Integrations",
                width: 474,
                rotation: 0,
                zIndex: 1,
                initialX: 2,
                initialY: 2,
              },
              {
                src: bcCva.src,
                alt: "Spend Insights",
                width: 500,
                rotation: 0,
                zIndex: 1,
                initialX: 57,
                initialY: 0,
              },
              {
                src: bcSpendinsights.src,
                alt: "Spend Insights",
                width: 200,
                rotation: 0,
                zIndex: 1,
                initialX: 10,
                initialY: 60,
              },
            ]}
          />
        </div>
      </div>
    </SnippetsGalleryItem>
  </SnippetsGallery>

  <div class="spacer-massive"></div>

  <SnippetsGallery>
    <!-- Tropic: Supplier Intelligence -->
    <SnippetsGalleryItem large>
      <div class="cs-wrapper">
        <div class="cs-content">
          <span class="cs-client">Tropic</span>
          <h2>
            <span>Supplier Intelligence</span>
            <span>Data as a Service</span>
          </h2>
          <p>
            How we created a new product for Tropic that highlighted its data
            and created a new intelligent platform.
          </p>
          <a href="/work/supplier-intelligence" class="cs-button"
            >View Case Study</a
          >
        </div>
        <div class="cs-image desktop-only">
          <DraggableScreens
            instanceId="supplier-intelligence"
            screens={[
              {
                src: bcDataMapping.src,
                alt: "Tropic Data Matching",
                width: 527,
                rotation: 0,
                zIndex: 1,
                initialX: 55,
                initialY: 60,
              },
              {
                src: bcIntegrations.src,
                alt: "Tropic Integrations",
                width: 474,
                rotation: 0,
                zIndex: 1,
                initialX: 2,
                initialY: 2,
              },
              {
                src: bcCva.src,
                alt: "Spend Insights",
                width: 500,
                rotation: 0,
                zIndex: 1,
                initialX: 57,
                initialY: 0,
              },
              {
                src: bcSpendinsights.src,
                alt: "Spend Insights",
                width: 200,
                rotation: 0,
                zIndex: 1,
                initialX: 10,
                initialY: 60,
              },
            ]}
          />
        </div>
      </div>
    </SnippetsGalleryItem>
  </SnippetsGallery>

  <div class="spacer-massive"></div>

  <SnippetsGallery>
    <!-- Glue -->
    <SnippetsGalleryItem large>
      <div class="cs-wrapper">
        <div class="cs-content">
          <span class="cs-client">Mystery / Glue</span>
          <h2>
            <span>People as Glue</span>
            <span>Connecting Employees</span>
          </h2>
          <p>
            How we rebranded and redesigned Mystery into Glue to help companies
            create a more connected and engaged workforce.
          </p>
          <a href="/work/people-glue" class="cs-button">View Case Study</a>
        </div>
        <div class="cs-image desktop-only">
          <DraggableScreens
            instanceId="people-glue"
            screens={[
              {
                src: bcDataMapping.src,
                alt: "Tropic Data Matching",
                width: 527,
                rotation: 0,
                zIndex: 1,
                initialX: 55,
                initialY: 60,
              },
              {
                src: bcIntegrations.src,
                alt: "Tropic Integrations",
                width: 474,
                rotation: 0,
                zIndex: 1,
                initialX: 2,
                initialY: 2,
              },
              {
                src: bcCva.src,
                alt: "Spend Insights",
                width: 500,
                rotation: 0,
                zIndex: 1,
                initialX: 57,
                initialY: 0,
              },
              {
                src: bcSpendinsights.src,
                alt: "Spend Insights",
                width: 200,
                rotation: 0,
                zIndex: 1,
                initialX: 10,
                initialY: 60,
              },
            ]}
          />
        </div>
      </div>
    </SnippetsGalleryItem>
  </SnippetsGallery>

  <div class="spacer-massive"></div>

  <div class="section-container">
    <div class="section-content">
      <h1 class="section-heading">Testimonials</h1>
      <div class="testimonials-container">
        <div
          class="testimonials-listing large-only"
          data-testimonials-container
        >
          <Testimonial
            {...testimonials[0]}
            include_classes="active flip"
            data-index={0}
            allTestimonials={testimonials}
          />
        </div>
        <div class="testimonials-listing small-only">
          {
            testimonials.map((testimonial, index) => (
              <Testimonial
                {...testimonial}
                include_classes="active flip"
                data-index={index}
                totalTestimonials={testimonials.length}
                allTestimonials={testimonials}
              />
            ))
          }
        </div>
      </div>
    </div>
  </div>

  <div class="spacer-massive"></div>

  <h1 class="section-heading">Gallery</h1>

  <div class="spacer-large"></div>

  <SnippetsGallery>
    <SnippetsGalleryItem
      image={contractsDemo01}
      imageAlt="contracts-demo-01"
      maxWidth={880}
    />

    <SnippetsGalleryItem
      image={contractsDemo02}
      imageAlt="contracts-demo-02"
      maxWidth={880}
    />

    <SnippetsGalleryItem
      image={contractsDemo01}
      imageAlt="contracts-demo-01"
      maxWidth={880}
    />

    <SnippetsGalleryItem
      image={contractsDemo02}
      imageAlt="contracts-demo-02"
      maxWidth={880}
    />
  </SnippetsGallery>

  <div class="spacer-massive"></div>
</BaseLayout>

<style lang="scss">
  // Breakpoint mixins
  @import "../styles/base/_breakpoints.scss";

  // Visual section
  .visual {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .cs-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: row;
    gap: var(--spacing-base);
    align-items: center;
    position: relative;

    @include tablet {
      flex-direction: column;
    }

    .cs-content {
      max-width: 480px;
      height: auto;
      padding: var(--spacing-base);
      margin: 20% auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: var(--spacing-base);
      border-radius: 10px;
      backdrop-filter: blur(10px);
      background-color: rgba(237, 229, 220, 0.25);
      z-index: 10;
      transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);

      &:hover {
        background-color: rgba(237, 229, 220, 0.65);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      @include tablet {
        max-width: 100%;
      }

      span.cs-client {
        color: var(--color-ink-tertiary);
        text-transform: uppercase;
        font-family: var(--font-mono);
        letter-spacing: 0.05em;
        font-size: var(--font-size-small);
        font-weight: var(--font-weight-bold);
      }

      h2 {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-small);
        margin-bottom: 0;
        pointer-events: none;

        span {
          text-wrap: balance;
          pointer-events: none;
        }

        span:last-child {
          color: var(--color-ink-tertiary);
          font-style: italic;
        }
      }

      p {
        color: var(--color-ink-secondary);
        font-size: var(--font-size-small);
        font-weight: var(--font-weight-normal);
        text-wrap: balance;
        margin-bottom: 0;
      }

      .cs-button {
        display: inline-block;
        max-width: fit-content;
        padding: 16px var(--spacing-base);
        background-color: var(--color-chocolate);
        color: var(--color-paper);
        font-size: var(--font-size-xsmall);
        font-weight: var(--font-weight-bold);
        font-family: var(--font-mono);
        letter-spacing: 0.05em;
        text-transform: uppercase;
        line-height: 1;
        text-decoration: none;
        border-radius: 6px;
        transition: background-color 0.3s ease;

        &:hover {
          background-color: var(--color-accent-light);
        }

        &:active,
        &:focus {
          background-color: var(--color-accent);
        }
      }
    }

    .cs-image {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  }

  .case-studies {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-base);

    .case-studies-listing {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-quad);
    }
  }

  h1.section-heading {
    text-align: center;
    color: var(--color-coffee);
    margin: var(--spacing-base) auto;
  }

  .testimonials-container {
    position: relative;
    width: 100%;
  }

  .testimonials-listing {
    position: relative;
    flex-direction: column;
    gap: var(--spacing-double);
    width: 100%;
    padding: var(--spacing-base) 0 var(--spacing-triple);

    &.small-only {
      display: none;

      @include tablet {
        display: flex;
      }
    }

    &.large-only {
      display: flex;

      @include tablet {
        display: none;
      }
    }
  }

  .desktop-only {
    @media (max-width: 820px) {
      display: none !important;
    }
  }
</style>
