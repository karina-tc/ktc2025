---
// Components
import BaseLayout from "../../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import { getCaseStudy } from "../../data/case-study-details";
import { checkAccess, hasValidAccessToken } from "../../middleware/checkAccess";

// Case Study Components
import * as Work from "../../components/work/index.js";
import Carousel from "../../components/Carousel.astro";

// Partials
import QuadrantChart from "../../components/_partials/work/QuadrantChart.astro";
import DataClusters from "../../components/_partials/work/DataClusters.astro";
import BackToTop from "../../components/BackToTop.astro";
import Plate from "../../components/work/Plate.astro";

//Assets
import showcaseBackground from "../../assets/backgrounds/noise-1.png";
import showcaseLogo from "../../assets/icons/cv-tropic.png";
import galaxyQuest from "../../assets/illustrations/case-studies/beyond-contracts/galaxy-quest-illus.png";
import cluster01 from "../../assets/illustrations/case-studies/beyond-contracts/data-cluster-01.svg";
import cluster02 from "../../assets/illustrations/case-studies/beyond-contracts/data-cluster-02.svg";
import cluster03 from "../../assets/illustrations/case-studies/beyond-contracts/data-cluster-03.svg";
import showcaseImage from "../../assets/case-studies/tropic/tropic-supplier-index.png";
import integrationsIndex from "../../assets/case-studies/tropic/integrations/integrations-index.png";
import integrationsDetails from "../../assets/case-studies/tropic/integrations/integrations-details.png";
import integrationsCollaboration from "../../assets/case-studies/tropic/integrations/integrations-collaboration.png";
import astronauts from "../../assets/illustrations/case-studies/beyond-contracts/data-transparency.png";
import showcaseVideo2 from "../../assets/case-studies/tropic/integrations/ai-supplier-matching.mp4";
import exploreIllustration from "../../assets/illustrations/case-studies/beyond-contracts/explore-illus.svg";
import deriskIllustration from "../../assets/illustrations/case-studies/beyond-contracts/derisk-illus.svg";
import planIllustration from "../../assets/illustrations/case-studies/beyond-contracts/plan-illus.svg";
import Reporting01 from "../../assets/illustrations/case-studies/beyond-contracts/reporting01.svg";
import Reporting02 from "../../assets/illustrations/case-studies/beyond-contracts/reporting02.svg";
import Reporting03 from "../../assets/illustrations/case-studies/beyond-contracts/reporting03.svg";
import Reporting04 from "../../assets/illustrations/case-studies/beyond-contracts/reporting04.svg";

// Data
const caseStudy = getCaseStudy("beyondContracts");

// Check access
if (Astro.url.pathname && checkAccess(Astro.url.pathname)) {
  const cookies = Astro.request.headers.get("cookie") || "";

  if (!hasValidAccessToken(cookies)) {
    return Astro.redirect(`/work/access?redirect=${Astro.url.pathname}`);
  }
}
---

<BaseLayout title={caseStudy.title} description={caseStudy.description}>
  <!-- Back to Top Button -->
  <BackToTop />

  <!-- Case Study Header -->
  <Work.CaseStudyHeader {...caseStudy} />

  <!-- Showcase -->
  <Work.CaseStudyShowcase
    background={showcaseBackground}
    caption={{
      icon: showcaseLogo,
      title: "What is Tropic?",
      description:
        "Tropic is an intake-to-procure platform that helps companies of all sizes—from startups to enterprises like OpenAI—manage their supplier relationships and reduce unnecessary spending.",
    }}
  >
    <Image
      src={showcaseImage}
      alt="show case image"
      draggable="false"
      width={1220}
      priority
    />
  </Work.CaseStudyShowcase>

  <!-- Spacer -->
  <div class="spacer-small"></div>

  <!-- Case Study Content -->
  <div class="section-container">
    <!-- Impact Section -->
    <Work.ImpactSection
      metrics={[
        {
          metric: "Time Savings",
          value: "+4hrs",
          description: "per week per customer",
        },
        {
          metric: "Customer Engagement",
          value: "+35%",
          description: "increase in engagement",
        },
        {
          metric: "Data Accuracy",
          value: "+50%",
          description: "increase in accuracy",
        },
      ]}
    />

    <!-- Problem -->
    <Work.StorySection kicker="Problem" title="Beyond the Contract Horizon">
      <p>
        Built initially around contracts, Tropic's platform faced a critical
        limitation: <strong
          >suppliers without contracts remained invisible, preventing complete
          spend tracking</strong
        >. Our 2023 customer interviews highlighted this as a major concern.
      </p>
      <p>
        The impact was significant. Shadow spend became harder to track, and <strong
          >customers resorted to using spreadsheets instead of our platform</strong
        >. We needed to reimagine our approach by making suppliers, not
        contracts, the central focus of our platform—creating what we called the
        "supplierverse."
      </p>
      <p>
        <strong>A great solution would increase customers...</strong>
      </p>
      <div class="spacer-small"></div>
      <Work.GridFeatures
        features={[
          {
            title: "Visibility",
            description:
              "360 view of all supplier relationships and spending across the organization",
            isStandout: true,
          },
          {
            title: "Focus",
            description:
              "Streamlined supplier management without difficulties and distractions",
          },
          {
            title: "Clarity",
            description:
              "Clear insights into supplier data, contracts, and spending patterns",
          },
        ]}
      />
    </Work.StorySection>

    <!-- Discovery -->
    <Work.StorySection
      kicker="Discovery"
      title="Galaxy Quest"
      artwork={{
        image: galaxyQuest,
        alt: "Galaxy Quest",
        width: 320,
      }}
    >
      <p>
        To make our experience a supplier centric one, I looked at all the data
        objects that made up a supplier so that we could built that universe.
        Through conversations with our Account Executives about customer
        onboarding, we studied how both clients and our team set up Tropic
        accounts. A clear pattern emerged: the <strong
          >key components of a supplier existed in isolation</strong
        >—like separate moons orbiting without any connection to each other.
      </p>
    </Work.StorySection>

    <!-- Strategy -->
    <Work.StorySection kicker="Strategizing" title="Mission Control">
      <p>
        With supplier data scattered across our procurement universe, we needed
        a mission control center to bring order to the chaos. <strong
          >Our customers needed a single source of truth</strong
        > that would give them complete visibility into their supplier expenses,
        commitments, and usage -
        <strong>but first, we had to tackle the data quality challenge</strong>.
      </p>

      <!-- Rocketship Illustration -->
      <Work.RocketShipPlate
        leftCard={{
          type: "Business Goal",
          title: "Data Quality",
          description: "Enhance data quality and visibility",
        }}
        rightCard={{
          type: "Customer Goal",
          title: "Spend Insights",
          description: "Provide customers financial impact of expenses",
        }}
        caption="Formalizing Our Plan for Launch"
      />

      <p>
        Data cleanup may not sound exciting—I'll admin that it's about as
        thrilling as organizing your sock drawer—but it was crucial.
        <strong
          >We needed to Marie Kondo our experience into a crystal-clear supplier
          system that would truly spark joy for our customers.</strong
        >
      </p>
      <p>
        We needed to organize our data to make it crystal clear how suppliers
        entered our system, while highlighting Tropic's advantages over a basic
        spreadsheet. This approach would provide the comprehensive financial
        reporting our customers needed and help them avoid drifting back into
        XLS space dust.
      </p>
      <p>
        To help me define the borders for our initial exploration, I prioritized
        the initiatives that could help us maximize financial reporting and
        operational value.
      </p>

      <!-- Quadrant Chart -->
      <QuadrantChart />

      <div class="spacer-large"></div>

      <!-- Polishing Data Clusters -->
      <h3>Polishing Data Clusters</h3>
      <p>
        To build the supplierverse, we needed to optimize several key areas
        within Tropic. We approached this by identifying distinct <strong
          >data clusters that required improvement before unifying them</strong
        > into a single, cohesive interface.
      </p>

      <DataClusters
        clusters={[
          {
            icon: cluster01,
            title: "Integrations",
            description:
              "How suppliers are created in Tropic through connected integrations, which can either be the original source of a supplier or provide additional supplier data.",
          },
          {
            icon: cluster02,
            title: "Requests & Contracts",
            description:
              "Suppliers can also originate within Tropic when users submit purchase requests or add new contracts.",
          },
          {
            icon: cluster03,
            title: "Spend Expenses",
            description:
              "Suppliers may or may not have associated costs. The expenses view reveals each supplier's actual financial impact on overall spending.",
          },
        ]}
      />
    </Work.StorySection>

    <!-- Solutioning -->
    <Work.StorySection kicker="Solutioning" title="Universe Building">
      <p>
        With supplier data scattered across our procurement universe, we needed
        a mission control center to bring order to the chaos. Our customers
        needed a single source of truth that would give them complete visibility
        into their supplier expenses, commitments, and usage - but first, we had
        to tackle the data quality challenge.
      </p>

      <h3>Data Integrations</h3>
      <p>
        We began with the foundation: data integrations, which are the primary
        source of supplier information in Tropic. We re-architected our
        integrations pages to answer four key questions:
      </p>

      <ol>
        <li>What data can I bring into Tropic?</li>
        <li>How can I ensure my data is as accurate as possible?</li>
        <li>How can I monitor the status of my data?</li>
        <li>How can I trace the origin of my supplier data?</li>
      </ol>
    </Work.StorySection>
  </div>

  <!-- Scrollable Gallery -->
  <Work.ScrollableGallery
    items={[
      {
        image: integrationsIndex,
        alt: "Integrations Index",
        title: "New Integrations Page",
        description:
          "Elevated from hidden settings to become a central feature. Enhanced with filters and restructured categories to focus on value rather than market type.",
      },
      {
        image: integrationsDetails,
        alt: "Integrations Details",
        title: "Integrations Details",
        description:
          "Each integration has a detailed view that shows the data that is being brought into Tropic and the status of the data.",
      },
      {
        image: integrationsCollaboration,
        alt: "Collaboration",
        title: "Collaboration",
        description:
          "Customers can now collaborate on connecting integrations to make sure connections are made correctly.",
      },
    ]}
  />

  <Work.StorySection subtitle="AI Supplier Matching">
    <p>
      Onboarding in Tropic can be lengthy since we ensure data accuracy while
      setting up a user's account. To expedite this process and allow customers
      and account executives to focus on complex data translations, we needed to
      use AI to enhance supplier matching between ERPs and Tropic.
    </p>
  </Work.StorySection>

  <Work.CaseStudyShowcase legend="AI Supplier Matching" spacingTight>
    <video
      src={showcaseVideo2}
      autoplay="true"
      muted="true"
      loop="true"
      class="w-full"></video>
  </Work.CaseStudyShowcase>

  <Work.StorySection subtitle="Data Transparency" spacing="none">
    <p>
      With improved data connection management, we needed to explore how users
      could see all their data in one clear surface. Over two weeks of
      explorations, we went deep on how the supplierverse could provide value to
      both finance and procurement teams. For this rocket ship to launch
      successfully, we had to make both these personas happy.
    </p>
    <p>
      After these explorations, I met with the Product and Engineering leads to
      refine our initial designs, focusing on what we knew would succeed. Since
      our team was newly formed, we decided to pursue achievable wins rather
      than moonshot ideas to build credibility with stakeholders and gain
      momentum in our work.
    </p>

    <div class="astronauts-container">
      <Plate
        label="Figure III."
        caption="Finance and Procurement Conquering Planet Spend"
      >
        <Image
          class="astronauts"
          src={astronauts}
          alt="2 astronauts looking at each other"
          width={885}
          draggable={false}
          loading="lazy"
        />
      </Plate>
    </div>
  </Work.StorySection>

  <section class="split-panels" data-intersection-observer={true}>
    <div class="panel-container">
      <div class="panel">
        <h3 class="title-heading">Explore</h3>
        <Image
          src={exploreIllustration}
          alt="Explore"
          width={418}
          draggable={false}
          loading="lazy"
        />
      </div>
      <div class="panel">
        <h3 class="title-heading">Derisk</h3>
        <Image
          src={deriskIllustration}
          alt="Derisk"
          width={371}
          draggable={false}
          loading="lazy"
        />
      </div>
      <div class="panel">
        <h3 class="title-heading">Plan</h3>
        <Image
          src={planIllustration}
          alt="Plan"
          width={455}
          draggable={false}
          loading="lazy"
        />
      </div>
    </div>
  </section>

  <Work.StorySection subtitle="Data Reporting" spacing="none">
    <p>
      Throughout our explorations, I focused on showing glimpses of potential
      features. However, I became convinced that data clarity alone wouldn't
      justify our customers' investment in Tropic. What we needed to build—and
      what our design partners were actively seeking—was a way to demonstrate
      how supplier costs affected their bottom line. Enter, the finance super
      galaxy.
    </p>
    <p>
      While I'm not a financial scientist myself, I was lucky to partner with a
      Product Lead who had universal knowledge of what finance teams scan for
      when searching for spend signals. Plus, another crew had already done the
      heavy lifting of making it easier for customers to plot their contract
      coordinates and cost trajectories. This alignment of the stars helped us
      launch our Contracts vs Actual mission into orbit.
    </p>
  </Work.StorySection>

  <Carousel
    label="Figure IV. Explorations into Reporting"
    items={[
      {
        title: "Saved styles",
        description:
          "Save attributes in a single, reusable style that anyone on your team can apply",
        image: Reporting01,
        alt: "Saved styles interface",
      },
      {
        title: "Components",
        description:
          "Create a Component, update it in one place, and it updates everywhere",
        image: Reporting02,
        alt: "Components interface",
      },
      {
        title: "Reporting 03",
        description: "Description for reporting 03",
        image: Reporting03,
        alt: "Reporting 03",
      },
      {
        title: "Reporting 04",
        description: "Description for reporting 04",
        image: Reporting04,
        alt: "Reporting 04",
      },
    ]}
  />

  <div class="spacer-large"></div>

  <Work.WorkFooter />
</BaseLayout>

<style lang="scss" scoped>
  // Breakpoint mixins
  @import "../../styles/base/_breakpoints.scss";

  .section-container.no-gap {
    margin-top: -40px;
    margin-bottom: -40px;
  }

  @include mobile {
    .astronauts-container {
      display: none;
    }
  }

  .split-panels {
    width: 100%;
    margin: var(--spacing-quad) 0;
    padding: var(--spacing-double) var(--spacing-base);
    background-color: var(--color-surface);

    .panel-container {
      width: 90%;
      max-width: 1220px;
      margin: 0 auto;
      display: flex;
      flex-direction: row;
      gap: var(--spacing-base);

      .panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-small);
        padding: var(--spacing-base) var(--spacing-base) 0;

        &:not(:last-child) {
          border-right: 1px solid var(--color-border);
        }
      }
      @include tablet {
        flex-direction: column;
        .panel {
          align-items: center;
          border-right: 0px !important;
          padding-bottom: var(--spacing-double);
          &:not(:last-child) {
            border-bottom: 1px solid var(--color-border);
          }
        }
      }
    }
    @include mobile {
      margin-top: var(--spacing-base);
      margin-bottom: var(--spacing-base);
    }
  }
</style>
